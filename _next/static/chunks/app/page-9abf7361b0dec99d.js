(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5282:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=5282,e.exports=t},1169:function(e,t,l){Promise.resolve().then(l.bind(l,7701))},7701:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return p}});var a=l(7437),r=l(2265),n=l(1994),s=l(8193);function i(e,t,l){var a,r,n;let s=new Map(e.map(e=>[e.id,e])),i=new Map;for(let t of e)i.set(t.id,{...t,children:[],partners:[]});for(let e of t)null===(a=i.get(e.partner_a))||void 0===a||a.partners.push(e.partner_b),null===(r=i.get(e.partner_b))||void 0===r||r.partners.push(e.partner_a);for(let e of l){null===(n=i.get(e.parent_id))||void 0===n||n.children.push(e.child_id);let t=i.get(e.child_id);t&&(t.parents||(t.parents=[]),t.parents.push(e.parent_id))}return{nodeById:i,personById:s}}var o=l(1388);let d=()=>(0,o.createBrowserClient)("https://knqbdesytcdyzuxclnoy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtucWJkZXN5dGNkeXp1eGNsbm95Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxMTkxNjEsImV4cCI6MjA2OTY5NTE2MX0.z9dGc6cn3MXAUagOY8bJm9-XKgqgiZS8bk81dz70uf8");var c=l(3538),u=l(9376);function h(e){var t,l,o;let{people:h,marriages:x,parentChild:p,onChanged:m}=e,{nodeById:v}=(0,r.useMemo)(()=>i(h,x,p),[h,x,p]),[f,g]=(0,r.useState)(""),[b,j]=(0,r.useState)(new Set),[y,N]=(0,r.useState)(new Set),{editMode:w,setEditMode:_}=(0,c.S)(),k=(e,t)=>e<t?"".concat(e,"|").concat(t):"".concat(t,"|").concat(e),C=(0,r.useMemo)(()=>{var e,t,l,a,r,n,s,i,o,d;let c=new Set,u=e=>{let t=[e];for(;t.length;){var l,a,r,n;let e=t.pop();if(!c.has(e)){for(let a of(c.add(e),null!==(r=null===(l=v.get(e))||void 0===l?void 0:l.children)&&void 0!==r?r:[]))t.push(a);for(let l of null!==(n=null===(a=v.get(e))||void 0===a?void 0:a.partners)&&void 0!==n?n:[])t.push(l)}}};for(let s of b){let[i,o]=s.split("|");for(let s of new Set([...null!==(l=null===(e=v.get(i))||void 0===e?void 0:e.children)&&void 0!==l?l:[],...null!==(a=null===(t=v.get(o))||void 0===t?void 0:t.children)&&void 0!==a?a:[]]))for(let e of(u(s),null!==(n=null===(r=v.get(s))||void 0===r?void 0:r.partners)&&void 0!==n?n:[]))u(e)}for(let e of y)for(let t of null!==(i=null===(s=v.get(e))||void 0===s?void 0:s.children)&&void 0!==i?i:[])for(let e of(u(t),null!==(d=null===(o=v.get(t))||void 0===o?void 0:o.partners)&&void 0!==d?d:[]))u(e);return c},[b,y,v]),M=(0,r.useMemo)(()=>{let e=new Set(h.filter(e=>!C.has(e.id)).map(e=>e.id));return{ppl:h.filter(t=>e.has(t.id)),mar:x.filter(t=>e.has(t.partner_a)&&e.has(t.partner_b)),pc:p.filter(t=>e.has(t.parent_id)&&e.has(t.child_id))}},[h,x,p,C]),{nodeById:S}=(0,r.useMemo)(()=>i(M.ppl,M.mar,M.pc),[M]),{nodes:E,positionById:A}=(0,r.useMemo)(()=>(function(e,t,l){var a,r,n,s,i,o,d,c,u,h,x,p,m,v;let f=null!==(a=null==l?void 0:l.levelGap)&&void 0!==a?a:220;null==l||l.nodeGap;let g=null!==(r=null==l?void 0:l.cardWidth)&&void 0!==r?r:140,b=null!==(n=null==l?void 0:l.blockMargin)&&void 0!==n?n:30,j=new Map;for(let[e,l]of t)j.set(e,(null!==(s=l.generation)&&void 0!==s?s:0)|0);let y=new Map;for(let e of t.values())for(let t of e.partners)y.has(e.id)||y.set(e.id,[]),y.has(t)||y.set(t,[]),y.get(e.id).push(t),y.get(t).push(e.id);let N=new Set;for(let e of t.keys()){if(N.has(e))continue;let t=[e];N.add(e);let l=[];for(;t.length;){let e=t.pop();for(let a of(l.push(e),null!==(i=y.get(e))&&void 0!==i?i:[]))N.has(a)||(N.add(a),t.push(a))}let a=Math.min(...l.map(e=>{var t;return null!==(t=j.get(e))&&void 0!==t?t:0}));for(let e of l)j.set(e,a)}let w=new Map;for(let[e]of t){let t=null!==(o=j.get(e))&&void 0!==o?o:0;w.has(t)||w.set(t,[]),w.get(t).push(e)}let _=Array.from(w.keys()).sort((e,t)=>e-t),k=new Map,C=e=>{var l,a;let r=null!==(a=null===(l=t.get(e))||void 0===l?void 0:l.birth_date)&&void 0!==a?a:null;if(null===r)return Number.MAX_SAFE_INTEGER;let n=String(r).match(/\d{1,4}/),s=n?parseInt(n[0],10):Number.MAX_SAFE_INTEGER;return Number.isFinite(s)?s:Number.MAX_SAFE_INTEGER},M=e=>{var l,a;let r=new Set;for(let n of e)(null!==(a=null===(l=t.get(n))||void 0===l?void 0:l.parents)&&void 0!==a?a:[]).forEach(e=>r.add(e));let n=Array.from(r).map(e=>{var t;return null===(t=k.get(e))||void 0===t?void 0:t.x}).filter(e=>"number"==typeof e);return 0===n.length?0:n.reduce((e,t)=>e+t,0)/n.length};for(let e of _){let a=e*f,r=w.get(e),n=new Set,s=[];for(let a of r){if(n.has(a))continue;n.add(a);let r=(null!==(c=null===(d=t.get(a))||void 0===d?void 0:d.partners)&&void 0!==c?c:[]).find(t=>{var l;return(null!==(l=j.get(t))&&void 0!==l?l:0)===e});if(r&&!n.has(r)){n.add(r);let e=t.get(a),i=t.get(r),o="M"===e.gender?e.id:"M"===i.gender?i.id:e.id,d=e.id===o?i.id:e.id,c=o<d?"".concat(o,"|").concat(d):"".concat(d,"|").concat(o),m=Math.min(C(o),C(d)),v=(null!==(x=null===(u=t.get(o))||void 0===u?void 0:u.parents)&&void 0!==x?x:[]).concat(null!==(p=null===(h=t.get(d))||void 0===h?void 0:h.parents)&&void 0!==p?p:[]).sort().join("|")||"single:".concat(o),f=M([o,d]);(null==l?void 0:l.collapsedCouples)&&l.collapsedCouples.has(c)?s.push({ids:[o],rank:m,parentsKey:v,weight:f}):s.push({ids:[o,d],rank:m,parentsKey:v,weight:f})}else{let e=C(a),l=(null!==(v=null===(m=t.get(a))||void 0===m?void 0:m.parents)&&void 0!==v?v:[]).sort().join("|")||"single:".concat(a),r=M([a]);s.push({ids:[a],rank:e,parentsKey:l,weight:r})}}let i=new Map;for(let e of s)i.has(e.parentsKey)||i.set(e.parentsKey,[]),i.get(e.parentsKey).push(e);let o=Array.from(i.entries()).sort((e,t)=>e[1].reduce((e,t)=>e+t.weight,0)/e[1].length-t[1].reduce((e,t)=>e+t.weight,0)/t[1].length),y=[],N=e=>{var l,a;let r=t.get(e);return"".concat(null!==(l=null==r?void 0:r.last_name)&&void 0!==l?l:""," ").concat(null!==(a=null==r?void 0:r.first_name)&&void 0!==a?a:"").toLowerCase()};for(let[,e]of o)e.sort((e,l)=>{if(e.rank!==l.rank)return e.rank-l.rank;let a=e=>{var l,a;let r=new Set;for(let n of e)(null!==(a=null===(l=t.get(n))||void 0===l?void 0:l.children)&&void 0!==a?a:[]).forEach(e=>r.add(e));return 0===r.size?Number.MAX_SAFE_INTEGER:Math.min(...Array.from(r).map(e=>C(e)))},r=a(e.ids),n=a(l.ids);if(r!==n)return r-n;let s=e.ids[0],i=l.ids[0];return N(s).localeCompare(N(i))}),y.push(...e);let _=0;for(let t of y){let l=2===t.ids.length?150+g:g,r=_+l/2;if(2===t.ids.length){let[l,n]=t.ids,s=r-75,i=r+75;k.set(l,{id:l,x:s,y:a,depth:e}),k.set(n,{id:n,x:i,y:a,depth:e})}else{let l=t.ids[0];k.set(l,{id:l,x:r,y:a,depth:e})}_+=l+b}let S=r.map(e=>{var t,l;return null!==(l=null===(t=k.get(e))||void 0===t?void 0:t.x)&&void 0!==l?l:0}),E=(Math.min(...S)+Math.max(...S))/2;for(let e of r){let t=k.get(e);t.x-=E}}return{nodes:Array.from(k.values()),positionById:k}})(0,S,{levelGap:220,nodeGap:220,cardWidth:140,blockMargin:40}),[[],S]),[I,L]=(0,r.useState)(.8),[D,z]=(0,r.useState)({x:300,y:160}),[F,P]=(0,r.useState)(!0),G=(0,r.useMemo)(()=>{let e=new Set(Array.from(v.values()).filter(e=>{var t;return(null!==(t=e.generation)&&void 0!==t?t:0)===1}).map(e=>e.id)),t=new Set;for(let l of x)e.has(l.partner_a)&&e.has(l.partner_b)&&t.add(k(l.partner_a,l.partner_b));let l=new Set;for(let e of v.values()){var a,r,n,s,i;if((null!==(n=e.generation)&&void 0!==n?n:0)!==1)continue;let t=(null!==(s=null===(a=e.partners)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,o=(null!==(i=null===(r=e.children)||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0;!t&&o&&l.add(e.id)}return{coupleKeys:t,singleIds:l}},[v,x]),X=(0,r.useRef)(!1);(0,r.useEffect)(()=>{if(X.current)return;let e=e=>(null!=e?e:"").toLowerCase().trim(),t=(t,l)=>{let a=e(t),r=e(l),n=Array.from(v.values()).find(t=>e(t.first_name||t.preferred_name)===a&&e(t.last_name)===r);return(null==n?void 0:n.id)||null},l=t("to dung","tran"),a=t("bao hue","chau"),{coupleKeys:r,singleIds:n}=G,s=l&&a?k(l,a):null,i=new Set;for(let e of r)s&&e===s||i.add(e);let o=new Set(n);j(i),N(o),X.current=!0},[v,x]);let U=()=>{let{coupleKeys:e,singleIds:t}=G;j(new Set(e)),N(new Set(t))},R=()=>{j(new Set),N(new Set)},T=(0,r.useMemo)(()=>{let{coupleKeys:e,singleIds:t}=G;for(let t of e)if(!b.has(t))return!1;for(let e of t)if(!y.has(e))return!1;return!0},[G,b,y]),B=e=>{var t,l;let a=null!==(l=null===(t=S.get(e))||void 0===t?void 0:t.parents)&&void 0!==l?l:[];if(a.length<2)return!1;let[r,n]=a,s=k(r,n);return b.has(s)},O=(0,r.useRef)(!1),W=(0,r.useRef)({x:0,y:0}),q=e=>{O.current=!0,W.current={x:e.clientX,y:e.clientY}},Y=(0,r.useRef)(new Map),J=(0,r.useRef)(null),K=(e,t)=>Math.hypot(e.x-t.x,e.y-t.y),Z=(e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2}),H=e=>{if("mouse"!==e.pointerType)try{var t,l;null===(t=(l=e.currentTarget).setPointerCapture)||void 0===t||t.call(l,e.pointerId)}catch(e){}if(Y.current.set(e.pointerId,{id:e.pointerId,x:e.clientX,y:e.clientY}),2===Y.current.size){let[e,t]=Array.from(Y.current.values()),l=K(e,t),a=Z(e,t),r={...D},n={x:(a.x-r.x)/I,y:(a.y-r.y)/I};J.current={dist:l,scale:I,translate:r,worldOrigin:n,screenOrigin:a}}1===Y.current.size&&(O.current=!0,W.current={x:e.clientX,y:e.clientY})},Q=e=>{let t=Y.current;if(t.has(e.pointerId)){if(t.set(e.pointerId,{id:e.pointerId,x:e.clientX,y:e.clientY}),2===t.size&&J.current){let[e,l]=Array.from(t.values()),a=K(e,l),r=Z(e,l),n=J.current,s=a/(n.dist||1),i=Math.min(2,Math.max(.3,n.scale*s)),o=n.worldOrigin,d={x:r.x-o.x*i,y:r.y-o.y*i};L(i),z(d)}else if(1===t.size&&O.current){let l=t.get(e.pointerId),a=l.x-W.current.x,r=l.y-W.current.y;z(e=>({x:e.x+a,y:e.y+r})),W.current={x:l.x,y:l.y}}}},V=e=>{Y.current.delete(e),Y.current.size<2&&(J.current=null),0===Y.current.size&&(O.current=!1)},$=e=>V(e.pointerId),ee=e=>V(e.pointerId);(0,r.useMemo)(()=>{let e=f.trim().toLowerCase();return e?Array.from(S.values()).filter(t=>{var l,a,r;return"".concat(null!==(a=null!==(l=t.preferred_name)&&void 0!==l?l:t.first_name)&&void 0!==a?a:""," ").concat(null!==(r=t.last_name)&&void 0!==r?r:"").toLowerCase().includes(e)}):[]},[f,S]);let et=(e,t)=>{let l=A.get(e);if(!l)return;let a="number"==typeof t?Math.max(.3,Math.min(2,t)):I;L(a);let r={w:window.innerWidth,h:window.innerHeight};z({x:r.w/2-l.x*a,y:r.h/2-l.y*a})},el=e=>{var t,l;let a=null!==(l=null===(t=v.get(e))||void 0===t?void 0:t.partners)&&void 0!==l?l:[];if(0===a.length){N(t=>{let l=new Set(t);return l.has(e)?l.delete(e):l.add(e),l});return}j(t=>{let l=new Set(t),r=a.every(t=>l.has(k(e,t)));for(let t of a){let a=k(e,t);r?l.delete(a):l.add(a)}return l})},ea=()=>{if(0===E.length)return;let e=E.map(e=>e.x),t=E.map(e=>e.y),l=Math.min(...e)-70,a=Math.max(...e)+70,r=Math.min(...t)-75,n=Math.max(...t)+75,s=window.innerWidth-(F?320:0),i=window.innerHeight-40,o=Math.min(2,Math.max(.3,.9*Math.min(s/(a-l),i/(n-r))));L(o),z({x:s/2+(F?320:0)/2-(l+a)/2*o,y:i/2-(r+n)/2*o})},[er,en]=(0,r.useState)(null),es=er&&null!==(t=S.get(er))&&void 0!==t?t:null,ei=(0,u.useRouter)(),eo=(0,r.useMemo)(()=>d(),[]),[ed,ec]=(0,r.useState)({});(0,r.useEffect)(()=>{var e,t,l,a,r,n,s,i,o,d,c,u,h;es&&ec({first_name:null!==(e=es.first_name)&&void 0!==e?e:"",last_name:null!==(t=es.last_name)&&void 0!==t?t:"",preferred_name:null!==(l=es.preferred_name)&&void 0!==l?l:"",gender:null!==(a=es.gender)&&void 0!==a?a:null,birth_date:null!==(r=es.birth_date)&&void 0!==r?r:"",birth_place:null!==(n=es.birth_place)&&void 0!==n?n:"",death_date:null!==(s=es.death_date)&&void 0!==s?s:"",death_place:null!==(i=es.death_place)&&void 0!==i?i:"",status:null!==(o=es.status)&&void 0!==o?o:null,phone:null!==(d=es.phone)&&void 0!==d?d:"",facebook:null!==(c=es.facebook)&&void 0!==c?c:"",photo:null!==(u=es.photo)&&void 0!==u?u:"",generation:null!==(h=es.generation)&&void 0!==h?h:null})},[es]);let eu=async()=>{if(!es)return;let e={...ed};try{await eo.from("people").update(e).eq("id",es.id),en(null),ei.refresh()}catch(e){console.error(e)}},[eh,ex]=(0,r.useState)(!1),[ep,em]=(0,r.useState)({gender:null,status:"Living"}),[ev,ef]=(0,r.useState)(""),[eg,eb]=(0,r.useState)(""),[ej,ey]=(0,r.useState)(""),eN=(0,r.useMemo)(()=>Array.from(S.values()),[S]),ew=async()=>{if(!ep.first_name||!ep.last_name){alert("First and last name are required");return}if(!ep.status){alert("Status is required");return}if("number"!=typeof ep.generation||isNaN(ep.generation)){alert("Generation is required");return}if(!ep.gender){alert("Gender is required");return}try{let e="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2)),{data:t,error:l}=await eo.from("people").insert({id:e,...ep}).select().single();if(l)throw l;let a=(null==t?void 0:t.id)||e,r=[],n=()=>"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2));if(ev&&r.push({id:n(),parent_id:ev,child_id:a}),eg&&r.push({id:n(),parent_id:eg,child_id:a}),r.length){let{error:e}=await eo.from("parent_child").insert(r);if(e)throw e}if(ej){let{error:e}=await eo.from("marriages").insert({id:n(),partner_a:a,partner_b:ej});if(e)throw e}ex(!1),ef(""),eb(""),ey(""),em({}),m&&await m()}catch(e){console.error(e)}};return(0,r.useEffect)(()=>{if(!es)return;let e=e=>{"Escape"===e.key&&en(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[es]),(0,r.useEffect)(()=>{E.length>0&&ea()},[E.length]),(0,r.useEffect)(()=>{window.innerWidth<1024&&P(!1)},[]),(0,a.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[F&&(0,a.jsxs)("aside",{className:"w-80 border-r border-slate-800 bg-slate-900/70 glass p-4 space-y-4 overflow-y-auto relative",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sticky top-0 bg-slate-900/90 py-2 z-10",children:[(0,a.jsx)(s.Z,{className:"h-5 w-5 text-slate-400"}),(0,a.jsx)("input",{className:"w-full rounded-md bg-slate-800/70 border border-slate-700 px-3 py-2 text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring",placeholder:"Search by name...",value:f,onChange:e=>g(e.target.value)})]}),(0,a.jsx)("div",{className:"sticky top-14 flex items-center gap-2 z-10 bg-slate-900/90 py-2",children:(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 text-xs text-slate-300 whitespace-nowrap",children:[(0,a.jsx)("input",{type:"checkbox",checked:w,onChange:e=>_(e.target.checked)})," Edit mode"]})}),(0,a.jsxs)("div",{className:"sticky top-24 flex items-center gap-2 z-10 bg-slate-900/90 py-2",children:[(0,a.jsx)("button",{className:"rounded bg-slate-800 hover:bg-slate-700 text-slate-100 px-3 py-1",onClick:()=>L(e=>Math.min(2,e+.1)),children:"+"}),(0,a.jsx)("button",{className:"rounded bg-slate-800 hover:bg-slate-700 text-slate-100 px-3 py-1",onClick:()=>L(e=>Math.max(.3,e-.1)),children:"-"}),(0,a.jsx)("button",{className:"rounded bg-slate-800 hover:bg-slate-700 text-slate-100 px-3 py-1",onClick:ea,children:"Reset"}),(0,a.jsx)("button",{className:"rounded bg-slate-800 hover:bg-slate-700 text-slate-100 px-3 py-1",onClick:()=>{T?R():U()},children:T?"Expand all":"Collapse all"}),(0,a.jsx)("button",{className:"ml-auto rounded bg-blue-600 hover:bg-blue-500 text-white px-3 py-1",onClick:()=>ex(!0),children:"Add person"})]}),Array.from(new Set(h.map(e=>{var t;return null!==(t=e.generation)&&void 0!==t?t:0}))).sort((e,t)=>e-t).map(e=>{let t=h.filter(t=>{var l;return(null!==(l=t.generation)&&void 0!==l?l:0)===e}).sort((e,t)=>{var l,a,r,n,s,i,o,d,c,u;let h=(null!==(o=null===(l=S.get(e.id))||void 0===l?void 0:l.parents)&&void 0!==o?o:[]).slice().sort().join("|"),x=(null!==(d=null===(a=S.get(t.id))||void 0===a?void 0:a.parents)&&void 0!==d?d:[]).slice().sort().join("|"),p=(null!==(c=null===(n=S.get(e.id))||void 0===n?void 0:null===(r=n.parents)||void 0===r?void 0:r.length)&&void 0!==c?c:0)>0?0:1,m=(null!==(u=null===(i=S.get(t.id))||void 0===i?void 0:null===(s=i.parents)||void 0===s?void 0:s.length)&&void 0!==u?u:0)>0?0:1;return p!==m?p-m:h!==x?h.localeCompare(x):(null!=e.birth_date?parseInt(String(e.birth_date),10):Number.MAX_SAFE_INTEGER)-(null!=t.birth_date?parseInt(String(t.birth_date),10):Number.MAX_SAFE_INTEGER)}).map(e=>e.id);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:["Generation ",e]})}),t.map(e=>{var t;let l=S.get(e);if(!l)return null;let r=(l.preferred_name||l.first_name||"")+" "+(l.last_name||"");return f&&!r.toLowerCase().includes(f.toLowerCase())?null:(0,a.jsxs)("button",{className:"w-full flex items-center gap-3 rounded px-2 py-2 hover:bg-slate-800/70",onClick:()=>{et(e,1.2),w&&en(e)},children:[l.photo?(0,a.jsx)("img",{src:l.photo,alt:r,className:"h-9 w-9 rounded-full object-cover"}):(0,a.jsx)("div",{className:"h-9 w-9 rounded-full bg-slate-700 grid place-items-center",children:"\uD83D\uDC64"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-slate-100",children:r}),(0,a.jsx)("div",{className:"text-[11px] text-slate-400",children:null!==(t=l.status)&&void 0!==t?t:"Unknown"})]})]},e)})]},e)}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-4",children:"Tip: drag to pan, scroll to zoom. Click a name to center."})]}),(0,a.jsxs)("main",{className:"flex-1 relative bg-gradient-to-b from-slate-900 to-slate-950",onPointerDown:H,onPointerMove:Q,onPointerUp:$,onPointerCancel:ee,style:{touchAction:"none"},children:[(0,a.jsx)("button",{className:"absolute left-2 top-2 z-50 rounded bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-semibold px-3 py-1 shadow-lg ring-2 ring-white/40",onClick:()=>{P(e=>!e),setTimeout(ea,50)},children:F?"Hide sidebar":"Show sidebar"}),(0,a.jsxs)("svg",{className:"absolute inset-0 w-full h-full",onWheel:e=>{L(Math.min(2,Math.max(.3,I-.001*e.deltaY)))},onMouseDown:e=>{e.target.closest("[data-node]")||q(e)},onMouseMove:e=>{if(!O.current)return;let t=e.clientX-W.current.x,l=e.clientY-W.current.y;z(e=>({x:e.x+t,y:e.y+l})),W.current={x:e.clientX,y:e.clientY}},onMouseUp:()=>{O.current=!1},onPointerDown:H,onPointerMove:Q,onPointerUp:$,onPointerCancel:ee,style:{touchAction:"none"},children:[(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"10",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",children:(0,a.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#475569"})})}),(0,a.jsxs)("g",{transform:"translate(".concat(D.x,", ").concat(D.y,") scale(").concat(I,")"),children:[(()=>{let e=new Set;for(let t of M.mar){let l=t.partner_a<t.partner_b?t.partner_a:t.partner_b,a=t.partner_a<t.partner_b?t.partner_b:t.partner_a;e.add("".concat(l,"|").concat(a))}let t=new Map;for(let e of p)t.has(e.child_id)||t.set(e.child_id,new Set),t.get(e.child_id).add(e.parent_id);let l=[],r=new Set;for(let[a,n]of t){if(B(a)){r.add(a);continue}let t=Array.from(n);if(t.length>=2){let n=t[0],s=t[1],i=n<s?n:s,o=n<s?s:n;if(e.has("".concat(i,"|").concat(o))){let e=A.get(i),t=A.get(o),n=A.get(a);if(e&&t&&n){let s=(e.x+t.x)/2,d=Math.max(e.y,t.y)+75,c=n.x,u=n.y-75;l.push({key:"".concat(i,"-").concat(o,"-").concat(a),x1:s,y1:d,x2:c,y2:u}),r.add(a)}}}}for(let e of p){if(B(e.child_id)||r.has(e.child_id))continue;let t=A.get(e.parent_id),a=A.get(e.child_id);if(!t||!a)continue;let n=t.x,s=t.y+75,i=a.x,o=a.y-75;l.push({key:e.id,x1:n,y1:s,x2:i,y2:o})}return l.map(e=>(0,a.jsx)("path",{d:"M ".concat(e.x1," ").concat(e.y1," C ").concat(e.x1," ").concat((e.y1+e.y2)/2,", ").concat(e.x2," ").concat((e.y1+e.y2)/2,", ").concat(e.x2," ").concat(e.y2),stroke:"#475569",strokeWidth:"3",fill:"none",markerEnd:"url(#arrow)"},e.key))})(),M.mar.map(e=>{let t=A.get(e.partner_a),l=A.get(e.partner_b);if(!t||!l)return null;let r=t.y;return(0,a.jsx)("path",{d:"M ".concat(t.x+70," ").concat(r," L ").concat(l.x-70," ").concat(r),stroke:"#fb7185",strokeWidth:"3.5",fill:"none",strokeDasharray:"6 6"},e.id)}),(()=>{let e=Array.from(new Set(E.map(e=>e.depth))).sort((e,t)=>e-t),t=Math.min(...E.map(e=>e.x))-200,l=Math.max(...E.map(e=>e.x))+200;return e.map(e=>{let r=220*e;return(0,a.jsxs)("g",{children:[(0,a.jsx)("line",{x1:t,y1:r,x2:l,y2:r,stroke:"#1f2937",strokeDasharray:"6 10",strokeWidth:2}),(0,a.jsx)("rect",{x:t,y:r-20,width:120,height:28,rx:8,fill:"#0f172a",stroke:"#1f2937"}),(0,a.jsxs)("text",{x:t+60,y:r-2,fill:"#e2e8f0",fontSize:12,textAnchor:"middle",children:["Generation ",e]})]},e)})})(),Array.from(new Map(E.map(e=>[e.id,e])).values()).filter(e=>!B(e.id)).map(e=>{var t;let l=S.get(e.id),r="M"===l.gender?"bg-male/90":"F"===l.gender?"bg-female/90":"bg-neutral/80",s=(l.status||"").toLowerCase(),i=e.x-70,o=e.y-75;return(0,a.jsx)("foreignObject",{x:i,y:o,width:140,height:150,"data-node":!0,children:(0,a.jsxs)("div",{className:(0,n.W)("rounded-2xl shadow-card text-white flex flex-col items-center justify-center h-full px-3 py-2 cursor-pointer relative select-none",r),onClick:()=>{w?en(e.id):el(e.id)},style:{touchAction:"none"},children:[(0,a.jsx)("div",{className:"relative mb-2",children:l.photo?(0,a.jsx)("img",{src:l.photo,alt:null!==(t=l.first_name)&&void 0!==t?t:"",className:"h-12 w-12 rounded-full object-cover ring-2 ring-white/20"}):(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-black/20 grid place-items-center text-2xl",children:"\uD83D\uDC64"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-xs font-semibold leading-4",children:[l.preferred_name||l.first_name," ",l.last_name]}),(0,a.jsx)("div",{className:(0,n.W)("text-[10px] opacity-90","deceased"===s?"text-deceased":"living"===s?"text-living":"text-slate-300"),children:l.status?String(l.status).toLowerCase():"unknown"}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mt-1 text-white/90",children:l.children.length>0&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 text-[10px]",children:[(0,a.jsx)("span",{role:"img","aria-label":"children",children:"\uD83D\uDC76"})," ",l.children.length]})})]})]})},e.id)})]})]}),es&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-6 z-50",onClick:()=>en(null),children:(0,a.jsxs)("div",{className:"bg-slate-900 text-slate-100 rounded-2xl shadow-xl border border-slate-800 w-[800px] max-w-[95vw]",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-5 border-b border-slate-800",children:[es.photo?(0,a.jsx)("img",{src:es.photo,alt:"",className:"h-20 w-20 rounded-full object-cover ring-2 ring-white/10"}):(0,a.jsx)("div",{className:"h-20 w-20 rounded-full bg-slate-700 grid place-items-center",children:"\uD83D\uDC64"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-xl font-semibold",children:[es.preferred_name||es.first_name," ",es.last_name]}),(0,a.jsx)("div",{className:"text-sm text-slate-400 capitalize",children:(es.status||"").toString()})]}),(0,a.jsx)("button",{className:"px-3 py-1 rounded bg-slate-800 hover:bg-slate-700",onClick:()=>en(null),children:"Close"})]}),(0,a.jsxs)("div",{className:"p-5 grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"First name"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.first_name||"",onChange:e=>ec(t=>({...t,first_name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Last name"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.last_name||"",onChange:e=>ec(t=>({...t,last_name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Preferred name"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.preferred_name||"",onChange:e=>ec(t=>({...t,preferred_name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Gender"}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.gender||"",onChange:e=>ec(t=>({...t,gender:e.target.value})),children:[(0,a.jsx)("option",{value:"",children:"—"}),(0,a.jsx)("option",{value:"M",children:"M"}),(0,a.jsx)("option",{value:"F",children:"F"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Status"}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.status||"",onChange:e=>ec(t=>({...t,status:e.target.value})),children:[(0,a.jsx)("option",{value:"",children:"—"}),(0,a.jsx)("option",{value:"Living",children:"Living"}),(0,a.jsx)("option",{value:"Deceased",children:"Deceased"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Birth date"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.birth_date||"",onChange:e=>ec(t=>({...t,birth_date:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Birth place"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.birth_place||"",onChange:e=>ec(t=>({...t,birth_place:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Death date"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.death_date||"",onChange:e=>ec(t=>({...t,death_date:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Death place"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.death_place||"",onChange:e=>ec(t=>({...t,death_place:e.target.value}))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Phone"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.phone||"",onChange:e=>ec(t=>({...t,phone:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Facebook"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.facebook||"",onChange:e=>ec(t=>({...t,facebook:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Photo URL"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ed.photo||"",onChange:e=>ec(t=>({...t,photo:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Generation"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:String(null!==(l=ed.generation)&&void 0!==l?l:""),onChange:e=>ec(t=>({...t,generation:e.target.value?parseInt(e.target.value,10):null}))})]}),(0,a.jsxs)("div",{className:"pt-2 flex gap-2",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-500",onClick:eu,children:"Save"}),(0,a.jsx)("button",{className:"px-4 py-2 rounded bg-slate-800 hover:bg-slate-700",onClick:()=>en(null),children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400 mb-2",children:"Family"}),(0,a.jsx)("div",{className:"bg-slate-800/50 rounded-lg p-4",children:(0,a.jsx)("svg",{width:"100%",height:"240",viewBox:"0 0 640 240",children:(()=>{var e,t,l;let r=(null!==(e=es.parents)&&void 0!==e?e:[]).map(e=>S.get(e)).filter(Boolean),n=(null!==(t=es.partners)&&void 0!==t?t:[]).map(e=>S.get(e)).filter(Boolean),s=(null!==(l=es.children)&&void 0!==l?l:[]).map(e=>S.get(e)).filter(Boolean),i=r.map((e,t)=>160+t*(r.length>1?320:0)),o=n.map((e,t)=>320+(t+1)*140),d=s.length>1?s.map((e,t)=>100+440/(s.length-1)*t):[320],c=[];return r.forEach((e,t)=>{c.push((0,a.jsxs)("text",{x:i[t],y:30,textAnchor:"middle",fontSize:12,fill:"#e2e8f0",children:[e.preferred_name||e.first_name," ",e.last_name||""]},"pt-".concat(e.id))),c.push((0,a.jsx)("path",{d:"M ".concat(i[t]," ").concat(36," L ").concat(320," ").concat(106),stroke:"#64748b"},"p-line-".concat(e.id)))}),c.push((0,a.jsx)("circle",{cx:320,cy:120,r:12,fill:"#38bdf8"},"me")),c.push((0,a.jsxs)("text",{x:320,y:148,textAnchor:"middle",fontSize:12,fill:"#e2e8f0",children:[es.preferred_name||es.first_name," ",es.last_name||""]},"me-t")),n.forEach((e,t)=>{c.push((0,a.jsx)("circle",{cx:o[t],cy:120,r:10,fill:"#f472b6"},"sp-".concat(e.id))),c.push((0,a.jsx)("path",{d:"M ".concat(332," ").concat(120," L ").concat(o[t]-12," ").concat(120),stroke:"#fb7185",strokeDasharray:"6 4"},"m-".concat(e.id)))}),s.forEach((e,t)=>{c.push((0,a.jsxs)("text",{x:d[t],y:210,textAnchor:"middle",fontSize:12,fill:"#e2e8f0",children:[e.preferred_name||e.first_name," ",e.last_name||""]},"ch-".concat(e.id))),c.push((0,a.jsx)("path",{d:"M ".concat(320," ").concat(134," L ").concat(d[t]," ").concat(196),stroke:"#64748b"},"c-line-".concat(e.id)))}),c})()})})]})]})}),eh&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-6 z-50",onClick:()=>ex(!1),children:(0,a.jsxs)("div",{className:"bg-slate-900 text-slate-100 rounded-2xl shadow-xl border border-slate-800 w-[820px] max-w-[95vw]",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-slate-800",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Add new person"}),(0,a.jsx)("button",{className:"px-3 py-1 rounded bg-slate-800 hover:bg-slate-700",onClick:()=>ex(!1),children:"Close"})]}),(0,a.jsxs)("div",{className:"p-5 grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-slate-400",children:["First name",(0,a.jsx)("span",{className:"text-red-400",children:" *"})]}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",required:!0,value:ep.first_name||"",onChange:e=>em(t=>({...t,first_name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-slate-400",children:["Last name",(0,a.jsx)("span",{className:"text-red-400",children:" *"})]}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",required:!0,value:ep.last_name||"",onChange:e=>em(t=>({...t,last_name:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Preferred name"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ep.preferred_name||"",onChange:e=>em(t=>({...t,preferred_name:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-slate-400",children:["Gender",(0,a.jsx)("span",{className:"text-red-400",children:" *"})]}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",required:!0,value:ep.gender||"",onChange:e=>em(t=>({...t,gender:e.target.value})),children:[(0,a.jsx)("option",{value:"",children:"—"}),(0,a.jsx)("option",{value:"M",children:"M"}),(0,a.jsx)("option",{value:"F",children:"F"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-slate-400",children:["Status",(0,a.jsx)("span",{className:"text-red-400",children:" *"})]}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",required:!0,value:ep.status||"",onChange:e=>em(t=>({...t,status:e.target.value})),children:[(0,a.jsx)("option",{value:"",children:"—"}),(0,a.jsx)("option",{value:"Living",children:"Living"}),(0,a.jsx)("option",{value:"Deceased",children:"Deceased"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Birth date"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ep.birth_date||"",onChange:e=>em(t=>({...t,birth_date:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Birth place"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ep.birth_place||"",onChange:e=>em(t=>({...t,birth_place:e.target.value}))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Photo URL"}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ep.photo||"",onChange:e=>em(t=>({...t,photo:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-xs text-slate-400",children:["Generation",(0,a.jsx)("span",{className:"text-red-400",children:" *"})]}),(0,a.jsx)("input",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",required:!0,value:String(null!==(o=ep.generation)&&void 0!==o?o:""),onChange:e=>em(t=>({...t,generation:e.target.value?parseInt(e.target.value,10):null}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Father (optional)"}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ev,onChange:e=>ef(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"—"}),eN.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.preferred_name||e.first_name," ",e.last_name||""]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Mother (optional)"}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:eg,onChange:e=>eb(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"—"}),eN.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.preferred_name||e.first_name," ",e.last_name||""]},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs text-slate-400",children:"Partner (optional)"}),(0,a.jsxs)("select",{className:"w-full bg-slate-800 border border-slate-700 rounded px-3 py-2",value:ej,onChange:e=>ey(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"—"}),eN.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.preferred_name||e.first_name," ",e.last_name||""]},e.id))]})]}),(0,a.jsxs)("div",{className:"pt-2 flex gap-2",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-500",onClick:ew,children:"Create"}),(0,a.jsx)("button",{className:"px-4 py-2 rounded bg-slate-800 hover:bg-slate-700",onClick:()=>ex(!1),children:"Cancel"})]})]})]})]})})]})]})}var x=l(257);function p(){let[e,t]=(0,r.useState)(null),[l,n]=(0,r.useState)(null),[s,i]=(0,r.useState)(null),o=async()=>{var e,l,a;if("true"===x.env.NEXT_PUBLIC_USE_JSON_FALLBACK||"true"===x.env.USE_JSON_FALLBACK)try{let e=await fetch("/data/sample.json",{cache:"no-store"});if(e.ok){let l=await e.json();t(l.people||[]),n(l.marriages||[]),i(l.parent_child||[]);return}}catch(e){}let r=d(),[s,o,c]=await Promise.all([r.from("people").select("*").returns(),r.from("marriages").select("*").returns(),r.from("parent_child").select("*").returns()]);t(null!==(e=s.data)&&void 0!==e?e:[]),n(null!==(l=o.data)&&void 0!==l?l:[]),i(null!==(a=c.data)&&void 0!==a?a:[])};return((0,r.useEffect)(()=>{o()},[]),e&&l&&s)?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h,{people:e,marriages:l,parentChild:s,onChanged:o}),(0,a.jsx)("div",{id:"modal-root",className:"fixed inset-0 pointer-events-none"})]}):(0,a.jsx)("div",{className:"min-h-screen grid place-items-center text-slate-300",children:"Loading…"})}},3538:function(e,t,l){"use strict";l.d(t,{EditModeProvider:function(){return s},S:function(){return i}});var a=l(7437),r=l(2265);let n=(0,r.createContext)(void 0);function s(e){let{children:t}=e,[l,s]=(0,r.useState)(!1);return(0,a.jsx)(n.Provider,{value:{editMode:l,setEditMode:s},children:t})}function i(){let e=(0,r.useContext)(n);if(!e)throw Error("useEditMode must be used within EditModeProvider");return e}}},function(e){e.O(0,[156,971,117,744],function(){return e(e.s=1169)}),_N_E=e.O()}]);